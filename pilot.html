<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>צו שיקום כלכלי – חדלות פירעון</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {font-family:'Heebo',sans-serif;background:#f7f9fc;margin:0;padding:20px;}
    .card{background:#fff;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.08);padding:14px;margin-bottom:14px;}
    h1{margin:0 0 12px;font-size:22px}
    label{font-weight:600;font-size:14px;display:block;margin:4px 0}
    input,select,button{font-family:inherit;font-size:14px}
    input[type="text"],input[type="date"],input[type="number"],select{width:100%;max-width:160px;padding:6px;border:1px solid #ccc;border-radius:8px;background:#fdfdfd}
    input[type="number"]{text-align:left}
    input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
    .seg{display:flex;gap:6px;flex-wrap:wrap}
    .pill{padding:6px 10px;border-radius:20px;background:#eef2f7;cursor:pointer;font-weight:600}
    .pill.active{background:#0ea5e9;color:#fff}
    .quick{display:flex;gap:6px;align-items:center}
    .chip{padding:6px 10px;border-radius:20px;background:#eef2f7;cursor:pointer;font-weight:600}
    .chip.active{background:#cfefff}
    .btn{padding:8px 12px;border-radius:8px;border:1px solid #ccc;background:#eef2f7;cursor:pointer;font-weight:600}
    .btn.primary{background:#0ea5e9;color:#fff;border:none}
    .kpis{display:flex;gap:10px;flex-wrap:wrap}
    .kpi{flex:1;background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.05)}
    .kpi .k{font-size:12px;color:#777}
    .kpi .v{font-size:16px;font-weight:700}
    table{width:100%;border-collapse:collapse;margin-top:10px;font-size:13px}
    th,td{border:1px solid #ddd;padding:4px;text-align:center}
    th{background:#f0f4fa}
  </style>
</head>
<body>
  <div class="card">
    <h1>צו שיקום כלכלי – חדלות פירעון</h1>
    <label>שם ממלא הטופס</label>
    <input type="text" id="fillerName" placeholder="השם שלך">
    <label>תאריך מילוי</label>
    <input type="text" id="fillDate" readonly>
    <label>תאריך מתן הצו</label>
    <input type="date" id="orderDate">
    <label>תחולת חיוב</label>
    <div class="seg" id="startSeg">
      <div class="pill active" data-v="next">חודש הבא</div>
      <div class="pill" data-v="immediate">מיידי</div>
    </div>
    <label>מס' חודשי התוכנית</label>
    <div class="quick" id="termQuick">
      <div class="chip" data-v="36">36</div>
      <div class="chip" data-v="48">48</div>
      <div class="chip" data-v="60">60</div>
      <input type="number" id="termMonths" min="1" max="120">
    </div>
    <label>צו תשלומים</label>
    <div class="seg" id="modeSeg">
      <div class="pill active" data-v="flat">קבוע</div>
      <div class="pill" data-v="tiered">תשלום מדורג</div>
      <div class="pill" data-v="reduction">הפחתת תשלומים</div>
    </div>
    <div id="flatFields">
      <label>סכום חודשי קבוע</label>
      <input type="number" id="flatAmount" min="0">
    </div>
  </div>

  <div class="card">
    <h2>פריסה חודשית</h2>
    <div id="scheduleWrap"></div>
  </div>

  <div class="card">
    <div class="kpis">
      <div class="kpi"><div class="k">סך התוכנית</div><div class="v" id="totalKPI">—</div></div>
      <div class="kpi"><div class="k">פיגור / מס' פיגורים</div><div class="v" id="arrearsKPI">—</div></div>
    </div>
    <button class="btn primary" id="sendBtn">שלח נתונים</button>
  </div>

  <script>
    const orderDate=document.getElementById('orderDate');
    const startSeg=document.getElementById('startSeg');
    const termMonths=document.getElementById('termMonths');
    const modeSeg=document.getElementById('modeSeg');
    const flatAmount=document.getElementById('flatAmount');
    const scheduleWrap=document.getElementById('scheduleWrap');
    const totalKPI=document.getElementById('totalKPI');
    const arrearsKPI=document.getElementById('arrearsKPI');

    function getStart(){return startSeg.querySelector('.pill.active').dataset.v}
    function getMode(){return modeSeg.querySelector('.pill.active').dataset.v}

    startSeg.addEventListener('click',e=>{if(e.target.classList.contains('pill')){startSeg.querySelectorAll('.pill').forEach(p=>p.classList.remove('active'));e.target.classList.add('active');build();}});
    modeSeg.addEventListener('click',e=>{if(e.target.classList.contains('pill')){modeSeg.querySelectorAll('.pill').forEach(p=>p.classList.remove('active'));e.target.classList.add('active');build();}});
    document.querySelectorAll('input').forEach(i=>i.addEventListener('input',build));

    function build(){
      if(!orderDate.value||!termMonths.value)return;
      const start=new Date(orderDate.value);
      if(getStart()==='next')start.setMonth(start.getMonth()+1);
      const months=parseInt(termMonths.value);
      scheduleWrap.innerHTML='';
      let total=0;
      const table=document.createElement('table');
      const thead=`<tr><th>חודש</th><th>שנה</th><th>סכום צפוי</th></tr>`;
      const rows=[];
      for(let i=0;i<months;i++){
        const d=new Date(start);d.setMonth(d.getMonth()+i);
        const amt=parseInt(flatAmount.value)||0;
        total+=amt;
        rows.push(`<tr><td>${d.toLocaleDateString('he-IL',{month:'long'})}</td><td>${d.getFullYear()}</td><td>₪${amt}</td></tr>`);
      }
      table.innerHTML=thead+rows.join('');
      scheduleWrap.appendChild(table);
      totalKPI.textContent='₪'+total.toLocaleString('he-IL');
      arrearsKPI.textContent='—';
    }

    document.getElementById('sendBtn').addEventListener('click',()=>{
      alert('כאן נוסיף חיבור ל-Google Sheets');
    });

    build();
  </script>
</body>
</html>
